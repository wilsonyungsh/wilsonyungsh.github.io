!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return s}));const r="deckgl-widget-tooltip",i="deckgl-widget-ctrl",o=`${i}-group`,a="deckgl-widget-input",s=["top-left","top-right","bottom-right","bottom-left"]},function(e,t,n){"use strict";n.d(t,"d",(function(){return r.a})),n.d(t,"f",(function(){return r.c})),n.d(t,"e",(function(){return r.b})),n.d(t,"a",(function(){return U})),n.d(t,"c",(function(){return W})),n.d(t,"b",(function(){return B}));var r=n(4),i=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function o(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function a(){}var s="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,p=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),d=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),f=new RegExp("^rgba\\("+[s,s,s,c]+"\\)$"),h=new RegExp("^rgba\\("+[u,u,u,c]+"\\)$"),g=new RegExp("^hsl\\("+[c,u,u]+"\\)$"),y=new RegExp("^hsla\\("+[c,u,u,c]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function w(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=l.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?x(t):3===n?new C(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?new C(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?new C(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=p.exec(e))?new C(t[1],t[2],t[3],1):(t=d.exec(e))?new C(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=f.exec(e))?k(t[1],t[2],t[3],t[4]):(t=h.exec(e))?k(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=g.exec(e))?S(t[1],t[2]/100,t[3]/100,1):(t=y.exec(e))?S(t[1],t[2]/100,t[3]/100,t[4]):m.hasOwnProperty(e)?x(m[e]):"transparent"===e?new C(NaN,NaN,NaN,0):null}function x(e){return new C(e>>16&255,e>>8&255,255&e,1)}function k(e,t,n,r){return r<=0&&(e=t=n=NaN),new C(e,t,n,r)}function E(e){return e instanceof a||(e=w(e)),e?new C((e=e.rgb()).r,e.g,e.b,e.opacity):new C}function C(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function _(){return"#"+M(this.r)+M(this.g)+M(this.b)}function j(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function M(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function S(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new O(e,t,n,r)}function L(e){if(e instanceof O)return new O(e.h,e.s,e.l,e.opacity);if(e instanceof a||(e=w(e)),!e)return new O;if(e instanceof O)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,c=o-i,u=(o+i)/2;return c?(s=t===o?(n-r)/c+6*(n<r):n===o?(r-t)/c+2:(t-n)/c+4,c/=u<.5?o+i:2-o-i,s*=60):c=u>0&&u<1?0:s,new O(s,c,u,e.opacity)}function O(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function N(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}i(a,w,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:b,formatHex:b,formatHsl:function(){return L(this).formatHsl()},formatRgb:v,toString:v}),i(C,(function(e,t,n,r){return 1===arguments.length?E(e):new C(e,t,n,null==r?1:r)}),o(a,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new C(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new C(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_,formatHex:_,formatRgb:j,toString:j})),i(O,(function(e,t,n,r){return 1===arguments.length?L(e):new O(e,t,n,null==r?1:r)}),o(a,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new O(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new O(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new C(N(e>=240?e-240:e+120,i,r),N(e,i,r),N(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const T=["getColor","getStrokeColor","getFillColor","getLineColor","getSourceColor","getTargetColor"];function U(e){const t=e=>"string"==typeof e?function(e){const t=w(e);return[t.r,t.g,t.b,255*t.opacity]}(e):e,n={};for(const r in e){const i=e[r];"colorRange"===r&&(n[r]=i.map(e=>t(e))),T.includes(r)&&(n[r]=e=>t("function"==typeof i?i(e):i))}return n}var P=n(2),$=n.n(P),A={"||":function(e,t){return e||t},"&&":function(e,t){return e&&t},"|":function(e,t){return e|t},"^":function(e,t){return e^t},"&":function(e,t){return e&t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"===":function(e,t){return e===t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"<<":function(e,t){return e<<t},">>":function(e,t){return e>>t},">>>":function(e,t){return e>>>t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t}},H={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function R(e,t){return e.map((function(e){return q(e,t)}))}function V(e,t){var n=q(e.object,t);return e.computed?[n,n[q(e.property,t)]]:[n,n[e.property.name]]}function q(e,t){switch(e.type){case"ArrayExpression":return R(e.elements,t);case"BinaryExpression":return A[e.operator](q(e.left,t),q(e.right,t));case"CallExpression":var n,r,i;if("MemberExpression"===e.callee.type?(n=(i=V(e.callee,t))[0],r=i[1]):r=q(e.callee,t),"function"!=typeof r)return;return r.apply(n,R(e.arguments,t));case"ConditionalExpression":return q(e.test,t)?q(e.consequent,t):q(e.alternate,t);case"Identifier":return t[e.name];case"Literal":return e.value;case"LogicalExpression":return"||"===e.operator?q(e.left,t)||q(e.right,t):"&&"===e.operator?q(e.left,t)&&q(e.right,t):A[e.operator](q(e.left,t),q(e.right,t));case"MemberExpression":return V(e,t)[1];case"ThisExpression":return t;case"UnaryExpression":return H[e.operator](q(e.argument,t));default:return}}function I(e){return"string"==typeof e&&e.startsWith("@=")}function W(e){const t={};for(const n in e){const r=e[n];I(r)&&(t[n]=B(r))}return t}function B(e){const t=e.replace("@=",""),n=(r=t,q.bind(null,$()(r)));var r;return e=>n(Object.assign({Math:Math,console:console},e))}},function(e,t,n){!function(n){"use strict";var r=function(e,t){var n=new Error(e+" at character "+t);throw n.index=t,n.description=e,n},i={"-":!0,"!":!0,"~":!0,"+":!0},o={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},a=function(e){var t,n=0;for(var r in e)(t=r.length)>n&&e.hasOwnProperty(r)&&(n=t);return n},s=a(i),c=a(o),u={true:!0,false:!1,null:null},l=function(e){return o[e]||0},p=function(e,t,n){return{type:"||"===e||"&&"===e?"LogicalExpression":"BinaryExpression",operator:e,left:t,right:n}},d=function(e){return e>=48&&e<=57},f=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!o[String.fromCharCode(e)]},h=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!o[String.fromCharCode(e)]},g=function(e){for(var t,n,a=0,g=e.charAt,y=e.charCodeAt,m=function(t){return g.call(e,t)},b=function(t){return y.call(e,t)},v=e.length,w=function(){for(var e=b(a);32===e||9===e||10===e||13===e;)e=b(++a)},x=function(){var e,t,n=E();return w(),63!==b(a)?n:(a++,(e=x())||r("Expected expression",a),w(),58===b(a)?(a++,(t=x())||r("Expected expression",a),{type:"ConditionalExpression",test:n,consequent:e,alternate:t}):void r("Expected :",a))},k=function(){w();for(var t=e.substr(a,c),n=t.length;n>0;){if(o.hasOwnProperty(t)&&(!f(b(a))||a+t.length<e.length&&!h(b(a+t.length))))return a+=n,t;t=t.substr(0,--n)}return!1},E=function(){var e,t,n,i,o,s,c,u;if(s=C(),!(t=k()))return s;for(o={value:t,prec:l(t)},(c=C())||r("Expected expression after "+t,a),i=[s,o,c];(t=k())&&0!==(n=l(t));){for(o={value:t,prec:n};i.length>2&&n<=i[i.length-2].prec;)c=i.pop(),t=i.pop().value,s=i.pop(),e=p(t,s,c),i.push(e);(e=C())||r("Expected expression after "+t,a),i.push(o,e)}for(e=i[u=i.length-1];u>1;)e=p(i[u-1].value,i[u-2],e),u-=2;return e},C=function(){var t,n,r;if(w(),t=b(a),d(t)||46===t)return _();if(39===t||34===t)return j();if(91===t)return N();for(r=(n=e.substr(a,s)).length;r>0;){if(i.hasOwnProperty(n)&&(!f(b(a))||a+n.length<e.length&&!h(b(a+n.length))))return a+=r,{type:"UnaryExpression",operator:n,argument:C(),prefix:!0};n=n.substr(0,--r)}return!(!f(t)&&40!==t)&&L()},_=function(){for(var e,t,n="";d(b(a));)n+=m(a++);if(46===b(a))for(n+=m(a++);d(b(a));)n+=m(a++);if("e"===(e=m(a))||"E"===e){for(n+=m(a++),"+"!==(e=m(a))&&"-"!==e||(n+=m(a++));d(b(a));)n+=m(a++);d(b(a-1))||r("Expected exponent ("+n+m(a)+")",a)}return t=b(a),f(t)?r("Variable names cannot start with a number ("+n+m(a)+")",a):46===t&&r("Unexpected period",a),{type:"Literal",value:parseFloat(n),raw:n}},j=function(){for(var e,t="",n=m(a++),i=!1;a<v;){if((e=m(a++))===n){i=!0;break}if("\\"===e)switch(e=m(a++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=e}else t+=e}return i||r('Unclosed quote after "'+t+'"',a),{type:"Literal",value:t,raw:n+t+n}},M=function(){var t,n=b(a),i=a;for(f(n)?a++:r("Unexpected "+m(a),a);a<v&&(n=b(a),h(n));)a++;return t=e.slice(i,a),u.hasOwnProperty(t)?{type:"Literal",value:u[t],raw:t}:"this"===t?{type:"ThisExpression"}:{type:"Identifier",name:t}},S=function(e){for(var t,n,i=[],o=!1;a<v;){if(w(),(t=b(a))===e){o=!0,a++;break}44===t?a++:((n=x())&&"Compound"!==n.type||r("Expected comma",a),i.push(n))}return o||r("Expected "+String.fromCharCode(e),a),i},L=function(){var e,t;for(t=40===(e=b(a))?O():M(),w(),e=b(a);46===e||91===e||40===e;)a++,46===e?(w(),t={type:"MemberExpression",computed:!1,object:t,property:M()}):91===e?(t={type:"MemberExpression",computed:!0,object:t,property:x()},w(),93!==(e=b(a))&&r("Unclosed [",a),a++):40===e&&(t={type:"CallExpression",arguments:S(41),callee:t}),w(),e=b(a);return t},O=function(){a++;var e=x();if(w(),41===b(a))return a++,e;r("Unclosed (",a)},N=function(){return a++,{type:"ArrayExpression",elements:S(93)}},T=[];a<v;)59===(t=b(a))||44===t?a++:(n=x())?T.push(n):a<v&&r('Unexpected "'+m(a)+'"',a);return 1===T.length?T[0]:{type:"Compound",body:T}};g.version="0.3.4",g.toString=function(){return"JavaScript Expression Parser (JSEP) v"+g.version},g.addUnaryOp=function(e){return s=Math.max(e.length,s),i[e]=!0,this},g.addBinaryOp=function(e,t){return c=Math.max(e.length,c),o[e]=t,this},g.addLiteral=function(e,t){return u[e]=t,this},g.removeUnaryOp=function(e){return delete i[e],e.length===s&&(s=a(i)),this},g.removeAllUnaryOps=function(){return i={},s=0,this},g.removeBinaryOp=function(e){return delete o[e],e.length===c&&(c=a(o)),this},g.removeAllBinaryOps=function(){return o={},c=0,this},g.removeLiteral=function(e){return delete u[e],this},g.removeAllLiterals=function(){return u={},this},e.exports?t=e.exports=g:t.parse=g}()},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(0);function i(e){r.e.forEach(t=>{const n=document.createElement("div");n.classList.add(r.b,`${r.a}-${t}`),e.appendChild(n)})}function o({html:e,pos:t,style:n}){const i=document.createElement("div");return i.classList.add(r.a),n&&(i.style.cssText=n),i.innerHTML=e,document.getElementsByClassName(`${r.a}-${t||"top-right"}`)[0].appendChild(i),i}function a({items:e,title:t,pos:n,style:r}){return o({html:`\n    <div class="legend">\n      <div class="legend-title">${t||""}</div>\n      <div class="legend-items"><ul>${e.map(e=>`\n    <li>\n      <span class="point-mark" style="background-color:${e.color};border: 1px solid black;"></span>\n      <span>${e.label}</span>\n    </li>\n  `).join("\n")}</ul></div>\n    </div>\n  `,pos:n,style:r})}function s(e){const t=document.createElement("div");return t.classList.add(r.d),e.appendChild(t),t}function c({props:e,text:t,pos:n}){const i=document.createElement("div");i.classList.add(r.a,r.c);const o=document.createElement("label");o.innerText=t||"I am your label";const a=document.createElement("input");return Object.assign(a,e),i.appendChild(o),i.appendChild(a),document.getElementsByClassName(`${r.a}-${n||"top-right"}`)[0].appendChild(i),a}},function(module,__webpack_exports__,__webpack_require__){"use strict";function createDeckGLProperties(e){return Object.assign({mapboxApiAccessToken:e.mapboxApiAccessToken||"",mapStyle:e.mapStyle||"",container:e.container,initialViewState:e.initialViewState||createInitialViewState(e),views:e.views||new deck.MapView,controller:!0,layers:[]},e.properties)}function createInitialViewState(e){return{longitude:e.longitude,latitude:e.latitude,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing}}function logVersions(){console.log("deck.gl",deck.version),"undefined"!=typeof mapboxgl&&console.log("mapbox-gl",mapboxgl.version)}function fixLayerProperties(layers){for(let i=0;i<layers.length;i++){const properties=layers[i].properties;for(let key of Object.keys(properties))if("string"==typeof properties[key])try{properties[key]=eval(properties[key])}catch(e){}}}__webpack_require__.d(__webpack_exports__,"a",(function(){return createDeckGLProperties})),__webpack_require__.d(__webpack_exports__,"c",(function(){return logVersions})),__webpack_require__.d(__webpack_exports__,"b",(function(){return fixLayerProperties}))},function(e,t,n){"use strict";(function(e){n(11);var r=n(8),i=n(3),o=n(1),a=n(7);e._deckWidget||(e._deckWidget={addInteractiveControl:i.b,sources:[]});const s={addLayer:function(e){e.convertData&&(e.data=HTMLWidgets.dataframeToD3(e.data)),this.addLayer(e)},addSource:function({id:e,data:t,convertData:n}){n&&(t=HTMLWidgets.dataframeToD3(t)),this.addSource({id:e,data:t})},addControl:i.a,addLegend:i.c,addJSONEditor:a.a,setViewState:function(e){this.deckGL.setProps({initialViewState:e})}};t.a=function(e,t,n){let a=null,c=null;const u=_deckWidget[e.id]={};return HTMLWidgets.shinyMode&&Shiny.addCustomMessageHandler("proxythis",(function(e){const t=e.x;console.log(t),c.setLayers([]),t.calls.forEach(({funcName:e,args:t})=>s[e].call(c,t)),Object(o.e)(c.layers),c.render()})),{renderValue:function(t){t.container=e.id;const n=t.sources||[],l=(t.layers,t.calls||[]);console.log(t),Object(o.f)();const p=Object(o.d)(t);a=new deck.DeckGL(p),Object(i.d)(e),Object(i.e)(e),c=u.viz=Object(r.a)({deckGL:a,widgetElement:e}),n.concat(_deckWidget.sources).forEach(e=>c.addSource(e)),l.forEach(({funcName:e,args:t})=>s[e].call(c,t)),c.render()},resize:function(e,t){}}}}).call(this,n(10))},function(e,t,n){e.exports=function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}var o=RegExp.prototype.test,a=/\S/;function s(e){return!function(e,t){return o.call(e,t)}(a,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,l=/\s+/,p=/\s*=/,d=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function h(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},h.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,r,o,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var s,c,u,l=this,p=!1;l;){if(e.indexOf(".")>0)for(s=l.view,c=e.split("."),u=0;null!=s&&u<c.length;)u===c.length-1&&(p=i(s,c[u])||(r=s,o=c[u],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(o))),s=s[c[u++]];else s=l.view[e],p=i(l.view,e);if(p){t=s;break}l=l.parent}a[e]=t}return n(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},y.prototype.parse=function(e,n){var i=this.templateCache,o=e+":"+(n||m.tags).join(":"),a=void 0!==i,c=a?i.get(o):void 0;return null==c&&(c=function(e,n){if(!e)return[];var i,o,a,c=!1,g=[],y=[],b=[],v=!1,w=!1,x="",k=0;function E(){if(v&&!w)for(;b.length;)delete y[b.pop()];else b=[];v=!1,w=!1}function C(e){if("string"==typeof e&&(e=e.split(l,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(r(e[0])+"\\s*"),o=new RegExp("\\s*"+r(e[1])),a=new RegExp("\\s*"+r("}"+e[1]))}C(n||m.tags);for(var _,j,M,S,L,O,N=new h(e);!N.eos();){if(_=N.pos,M=N.scanUntil(i))for(var T=0,U=M.length;T<U;++T)s(S=M.charAt(T))?(b.push(y.length),x+=S):(w=!0,c=!0,x+=" "),y.push(["text",S,_,_+1]),_+=1,"\n"===S&&(E(),x="",k=0,c=!1);if(!N.scan(i))break;if(v=!0,j=N.scan(f)||"name",N.scan(u),"="===j?(M=N.scanUntil(p),N.scan(p),N.scanUntil(o)):"{"===j?(M=N.scanUntil(a),N.scan(d),N.scanUntil(o),j="&"):M=N.scanUntil(o),!N.scan(o))throw new Error("Unclosed tag at "+N.pos);if(L=">"==j?[j,M,_,N.pos,x,k,c]:[j,M,_,N.pos],k++,y.push(L),"#"===j||"^"===j)g.push(L);else if("/"===j){if(!(O=g.pop()))throw new Error('Unopened section "'+M+'" at '+_);if(O[1]!==M)throw new Error('Unclosed section "'+O[1]+'" at '+_)}else"name"===j||"{"===j||"&"===j?w=!0:"="===j&&C(M)}if(E(),O=g.pop())throw new Error('Unclosed section "'+O[1]+'" at '+N.pos);return function(e){for(var t,n=[],r=n,i=[],o=0,a=e.length;o<a;++o)switch((t=e[o])[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":i.pop()[5]=t[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(y))}(e,n),a&&i.set(o,c)),c},y.prototype.render=function(e,t,n,r){var i=this.parse(e,r),o=t instanceof g?t:new g(t,void 0);return this.renderTokens(i,o,n,e,r)},y.prototype.renderTokens=function(e,t,n,r,i){for(var o,a,s,c="",u=0,l=e.length;u<l;++u)s=void 0,"#"===(a=(o=e[u])[0])?s=this.renderSection(o,t,n,r):"^"===a?s=this.renderInverted(o,t,n,r):">"===a?s=this.renderPartial(o,t,n,i):"&"===a?s=this.unescapedValue(o,t):"name"===a?s=this.escapedValue(o,t):"text"===a&&(s=this.rawValue(o)),void 0!==s&&(c+=s);return c},y.prototype.renderSection=function(e,r,i,o){var a=this,s="",c=r.lookup(e[1]);if(c){if(t(c))for(var u=0,l=c.length;u<l;++u)s+=this.renderTokens(e[4],r.push(c[u]),i,o);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)s+=this.renderTokens(e[4],r.push(c),i,o);else if(n(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(r.view,o.slice(e[3],e[5]),(function(e){return a.render(e,r,i)})))&&(s+=c)}else s+=this.renderTokens(e[4],r,i,o);return s}},y.prototype.renderInverted=function(e,n,r,i){var o=n.lookup(e[1]);if(!o||t(o)&&0===o.length)return this.renderTokens(e[4],n,r,i)},y.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),i=e.split("\n"),o=0;o<i.length;o++)i[o].length&&(o>0||!n)&&(i[o]=r+i[o]);return i.join("\n")},y.prototype.renderPartial=function(e,t,r,i){if(r){var o=n(r)?r(e[1]):r[e[1]];if(null!=o){var a=e[6],s=e[5],c=e[4],u=o;return 0==s&&c&&(u=this.indentPartial(o,c,a)),this.renderTokens(this.parse(u,i),t,r,u,i)}}},y.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},y.prototype.escapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return m.escape(n)},y.prototype.rawValue=function(e){return e[1]};var m={name:"mustache.js",version:"4.0.1",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){b.templateCache=e},get templateCache(){return b.templateCache}},b=new y;return m.clearCache=function(){return b.clearCache()},m.parse=function(e,t){return b.parse(e,t)},m.render=function(e,n,r,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(t(o=e)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return b.render(e,n,r,i)},m.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return c[e]}))},m.Scanner=h,m.Context=g,m.Writer=y,m}()},function(e,t,n){"use strict";const r=69,i={mode:"ace/mode/json",tabSize:2,maxLines:15};t.a=function({options:e,style:t,theme:n}){const o=this,a=document.createElement("div");a.classList.add("deckgl-widget-json-editor"),t&&(a.style.cssText=t);const s=ace.edit(a,Object.assign(i,e));if(s.setTheme(`ace/theme/${n||"idle_fingers"}`),document.getElementById("deckgl-overlay").addEventListener("keydown",e=>{e.keyCode===r&&(a.style.display="none"===a.style.display?"block":"none")}),o){o.widgetElement.append(a);const e=o.layers.map(e=>e.properties),t=JSON.stringify({layers:e},null,"\t");s.session.setValue(t),o.editor=s,s.session.on("change",function(e){return t=>{try{const t=JSON.parse(e.editor.getValue());e.layers.map((e,n)=>Object.assign(e.properties,t.layers[n])),e.render()}catch(e){}}}(o))}return s}},function(e,t,n){"use strict";var r=n(6),i=n(1),o=n(0),a=function(e,t){HTMLWidgets.shinyMode&&(e.onClick=function(e){const n={lng:e.lngLat[0],lat:e.lngLat[1],object:e.object};Shiny.onInputChange(t.id+"_onclick",n)}),e=Object.assign(e,Object(i.c)(e));const n=(e=Object.assign(e,Object(i.a)(e))).tooltip||e.getTooltip;return n&&(e.onHover=function(e){const t=document.getElementsByClassName(o.d)[0];e.style&&(t.style.cssText=e.style);return function({x:n,y:i,object:o}){if(!o)return t.innerHTML="",void(t.style.display="none");t.style.top=i+"px",t.style.left=n+"px",t.innerHTML="function"==typeof e?e(o):Object(r.render)("string"==typeof e?e:e.html,o),t.style.display="block"}}(n)),e};t.a=({deckGL:e,widgetElement:t})=>({deckGL:e,widgetElement:t,layers:[],sources:[],getContainer(){return this.deckGL.props.container},addLayer(e){this.layers.push(e)},addSource(e){this.sources.push(e)},getSource(e){return this.sources.filter(t=>t.id===e)[0]},setLayers(e){e.forEach(e=>{e.convertData&&(e.data=HTMLWidgets.dataframeToD3(e.data))}),this.layers=e},render(){const e=this.layers.map(e=>{const t=e.source?this.getSource(e.source).data:e.data;e.properties.data="object"==typeof t&&e.properties.filter?t.filter(Object(i.b)(e.properties.filter)):t;const n=a(e.properties,this.widgetElement);return new deck[e.className](n)});this.deckGL.setProps({layers:e})}})},function(e,t,n){"use strict";n.r(t);var r=n(5);HTMLWidgets.widget({name:"deckgl",type:"output",factory:r.a})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(12),i=n(13);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(r(i,o),i.locals?i.locals:{});e.exports=a},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],c=t.base?o[0]+t.base:o[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var p=s(l),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==p?(a[p].references++,a[p].updater(d)):a.push({identifier:l,updater:y(d,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,p=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=p(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,g=0;function y(e,t){var n,r,i;if(t.singleton){var o=g++;n=h||(h=u(t)),r=d.bind(null,n,o,!1),i=d.bind(null,n,o,!0)}else n=u(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);a[i].references--}for(var o=c(e,t),u=0;u<n.length;u++){var l=s(n[u]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=o}}}},function(e,t,n){(t=n(14)(!1)).push([e.i,'.deck-tooltip, .deckgl-widget-ctrl, .deckgl-widget-tooltip {\n  font: 12px/20px "Helvetica Neue", Arial, sans-serif;\n}\n\n.deckgl-widget-tooltip {\n  padding: 5px;\n  /* border-radius: 5px; */\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  max-width: 300px;\n  pointer-events: none;\n  display: none;\n}\n\n.deckgl-widget-ctrl-group, .deckgl-widget-tooltip {\n  position: absolute;\n  /* pointer-events: none; */\n  z-index: 2;\n}\n\n.deckgl-widget-ctrl {\n  background: #FFFFFF;\n  padding: 10px;\n}\n\n.deckgl-widget-ctrl label {\n  padding-right: 10px;\n}\n\n.deckgl-widget-input {\n  display: flex;\n  align-items: center;\n}\n\n.deckgl-widget-ctrl-top-left { top: 10px; left: 10px; }\n.deckgl-widget-ctrl-top-right { top: 10px; right: 10px; }\n.deckgl-widget-ctrl-bottom-left { bottom: 10px; left: 10px; }\n.deckgl-widget-ctrl-bottom-right { bottom: 10px; right: 10px; }\n\n.deckgl-widget-json-editor {\n  /* background: white; */\n  font-size: 12pt;\n  position: absolute;\n  z-index: 9;\n  width: 50%;\n  height: 300px;\n}\n\n.legend ul {\n  padding: 0;\n  margin-bottom: 0;\n}\n\n.legend li {\n  list-style-type: none;\n  margin: 0 0 8px 0;\n  display: flex;\n  vertical-align: middle;\n}\n\n.point-mark {\n  width: 10px;\n  height: 10px;\n  align-self: center;\n  border-radius: 50%;\n  margin-right: 12px;\n  box-sizing: border-box;\n  display: inline-block;\n}\n',""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}}]);